/* RESET & CƠ BẢN */
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-snap-type: y mandatory; }
body {
  font-family: 'Segoe UI', sans-serif;
  /* Màu nền Deep & Romantic như bạn muốn */
  background: radial-gradient(circle at center, #1a052e 0%, #020024 100%);
  color: #fff;
  overflow-x: hidden;
}

.screen {
  height: 100vh;
  scroll-snap-align: start;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
}

/* TIÊU ĐỀ */
.title { 
  font-size: 2.4rem; 
  animation: float 3s ease-in-out infinite; 
  z-index: 10; 
  text-shadow: 0 0 10px rgba(255,255,255,0.5);
}
@keyframes float { 50% { transform: translateY(-10px); } }

/* CÂY THÔNG - Tối ưu cho mobile */
.tree { position: relative; width: 300px; height: 450px; margin-top: 20px; }
.star { 
  color: gold; font-size: 40px; text-align: center; position: relative; z-index: 5;
  filter: drop-shadow(0 0 15px gold); 
}
.leaf {
  position: absolute; left: 50%; transform: translateX(-50%);
  background: radial-gradient(circle at top, #2ecc71, #0b6623);
  border-radius: 50%;
}
.l1 { top: 50px; width: 140px; height: 80px; }
.l2 { top: 110px; width: 190px; height: 100px; }
.l3 { top: 190px; width: 240px; height: 120px; }
.l4 { top: 280px; width: 280px; height: 140px; }
.trunk {
  position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
  width: 60px; height: 70px; background: #5a3825; border-radius: 8px;
}

/* ẢNH TRÊN CÂY - Sắp xếp lại cho cân */
.big-wrap {
  position: absolute; left: 50%; top: 210px; 
  transform: translateX(-50%);
  width: 120px; height: 120px; z-index: 20;
}
.orn { border-radius: 50%; border: 2px solid #fff; object-fit: cover; will-change: transform; }
.big-wrap .orn.big { width: 100%; height: 100%; animation: swingBig 3s ease-in-out infinite; }
.small { position: absolute; width: 70px; height: 70px; z-index: 15; animation: swingSmall 3.5s ease-in-out infinite; }

@keyframes swingBig { 0%, 100% { transform: rotate(-2deg); } 50% { transform: rotate(2deg); } }
@keyframes swingSmall { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }

.tl { top: 140px; left: 30px; }
.tr { top: 140px; right: 30px; }
.bl { top: 300px; left: 35px; }
.br { top: 300px; right: 35px; }

/* HỘP QUÀ & LÁ THƯ */
.gift { font-size: 100px; cursor: pointer; transition: 0.5s; z-index: 100; filter: drop-shadow(0 0 10px red); }
.gift.hidden { opacity: 0; transform: scale(0); pointer-events: none; }

.letter {
  display: none; opacity: 0; margin-top: 20px; 
  background: rgba(255, 255, 255, 0.9); 
  backdrop-filter: blur(5px);
  color: #333; padding: 25px; border-radius: 15px; 
  max-width: 90%; transition: 1s;
  text-align: center; border: 2px solid gold; 
  box-shadow: 0 0 30px rgba(0,0,0,0.5); z-index: 101;
}
.letter.show { display: block; opacity: 1; }

/* ===== HỆ THỐNG TUYẾT SIÊU NHẸ (BẢN CHỐT) ===== */
.snow-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
.snow-layer span {
  position: absolute; top: -50px;
  user-select: none; opacity: 0.7;
  transform: translate3d(0, 0, 0); /* Ép dùng GPU để mượt */
  will-change: transform;
  animation: fall linear infinite;
}

@keyframes fall {
  0% { transform: translate3d(0, 0, 0); opacity: 0; }
  10% { opacity: 1; }
  95% { opacity: 1; }
  100% { transform: translate3d(0, 105vh, 0); opacity: 0; }
}

/* Vệt trái tim khi kéo tay (Giữ nguyên class để JS gọi) */
.heart-click {
  position: fixed; pointer-events: none; z-index: 9999;
  background-size: contain; background-repeat: no-repeat;
  animation: heartFly 0.8s ease-out forwards;
}
@keyframes heartFly {
  0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
  100% { transform: translate(-50%, -100px) scale(1.2); opacity: 0; }
}
